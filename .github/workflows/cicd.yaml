on:
   push:
      branches:
         - develop

jobs:
   build-and-deploy:
      runs-on: windows-latest
      steps:
         - uses: actions/checkout@v2
         - uses: actions/setup-node@v2
           with:
              node-version: 20.9.0
         - run: npm ci
         - run: npm run build
         - name: Deploy to production
           with:
              host: ${{ secrets.HOST }}
              username: ${{ secrets.USERNAME }}
              password: ${{ secrets.PASSWORD }}
              script: |
                 cd C:/Users/Administrator/i-wms/client
                 git pull origin develop
                 npm install && npm run build
                 pm2 reload all
